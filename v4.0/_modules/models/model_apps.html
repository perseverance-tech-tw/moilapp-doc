<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>models.model_apps &mdash; MoilApp Documentation 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/light-moilapp.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_note.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">Definition and overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide.html">Moilapp Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">MoilApp of Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin_extention.html">Plugin Extention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting_issue.html">Troubleshooting an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MoilApp Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">models.model_apps</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for models.model_apps</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This Class is to provide model for moilapp application. to make it not make confuse on the plugin class</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">git</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">PyQt6.QtGui</span> <span class="kn">import</span> <span class="n">QCursor</span><span class="p">,</span> <span class="n">QImage</span><span class="p">,</span> <span class="n">qRgb</span>
<span class="kn">from</span> <span class="nn">PyQt6.QtCore</span> <span class="kn">import</span> <span class="n">pyqtSignal</span><span class="p">,</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QTimer</span><span class="p">,</span> <span class="n">QRect</span>
<span class="kn">from</span> <span class="nn">PyQt6.QtWidgets</span> <span class="kn">import</span> <span class="n">QMessageBox</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<div class="viewcode-block" id="ModelApps">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps">[docs]</a>
<span class="k">class</span> <span class="nc">ModelApps</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="n">signal_image_original</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">image_result</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">git_repository_info</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">config_view_info</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">alpha_beta</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">slider_time_value</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">timer_video_info</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">timer_status</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">recent_media_source</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">recenter_image</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">value_coordinate</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes an instance of the class.</span>

<span class="sd">        Args:</span>
<span class="sd">            model: An instance of the `Model` class.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __model (`Model`): An instance of the `Model` class.</span>
<span class="sd">            __image (None): The current image being displayed.</span>
<span class="sd">            __moildev (None): An instance of the `Moildev` class.</span>
<span class="sd">            __media_source (None): The path to the media source file.</span>
<span class="sd">            __parameter_name (None): The name of the parameter used.</span>
<span class="sd">            __angle_rotate (None): The angle to rotate the image by.</span>
<span class="sd">            __map_x_anypoint (None): The x-coordinate of the point to display.</span>
<span class="sd">            __map_y_anypoint (None): The y-coordinate of the point to display.</span>
<span class="sd">            __map_x_pano (None): The x-coordinate of the panorama.</span>
<span class="sd">            __map_y_pano (None): The y-coordinate of the panorama.</span>
<span class="sd">            __configuration_view (None): The configuration view settings.</span>
<span class="sd">            __config_file (None): The path to the configuration file.</span>
<span class="sd">            __ratio_x (None): The ratio of the x-coordinate of the mouse click.</span>
<span class="sd">            __ratio_y (None): The ratio of the y-coordinate of the mouse click.</span>
<span class="sd">            __pos_x (None): The x-coordinate of the mouse click.</span>
<span class="sd">            __pos_y (None): The y-coordinate of the mouse click.</span>
<span class="sd">            __image_original (None): The original image.</span>
<span class="sd">            repo_github (None): The URL of the GitHub repository.</span>
<span class="sd">            __width_image_result (None): The width of the resulting image.</span>
<span class="sd">            __draw_polygon (True): Indicates whether to draw the polygon.</span>
<span class="sd">            __state_rubberband (False): Indicates whether the rubberband is active.</span>
<span class="sd">            __state_view (&quot;FisheyeView&quot;): The current view state.</span>
<span class="sd">            __pano_mode (&quot;car&quot;): The current panorama mode.</span>
<span class="sd">            __anypoint_mode (&quot;mode_1&quot;): The current anypoint mode.</span>
<span class="sd">            __size_rubberband (None): The size of the rubberband.</span>
<span class="sd">            __pos_video_image_saved ([]): The position of the video in the saved image.</span>
<span class="sd">            load_saved_image (False): Indicates whether to load a saved image.</span>
<span class="sd">            saved_image_list ([]): A list of saved images.</span>
<span class="sd">            cap (None): An instance of the OpenCV `VideoCapture` class.</span>
<span class="sd">            video (False): Indicates whether the video is active.</span>
<span class="sd">            fps (25): The frames per second of the video.</span>
<span class="sd">            i_camera (0): The index of the camera.</span>

<span class="sd">            timer (`QTimer`): A timer for the next frame signal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__moildev_recenter</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__parameter_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pos_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pos_y</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recenter_image_state</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__width_image_result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__draw_polygon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__state_rubberband</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">=</span> <span class="s2">&quot;FisheyeView&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pano_mode</span> <span class="o">=</span> <span class="s2">&quot;car&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__anypoint_mode</span> <span class="o">=</span> <span class="s2">&quot;mode_1&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__size_rubberband</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pos_video_image_saved</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">saved_image_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">video</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i_camera</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">)</span>

<div class="viewcode-block" id="ModelApps.save_image_file">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.save_image_file">[docs]</a>
    <span class="k">def</span> <span class="nf">save_image_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">dst_directory</span><span class="p">,</span> <span class="n">type_camera</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save an image file to the specified directory and add metadata to the configuration view.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: A NumPy array containing the image data to be saved.</span>
<span class="sd">            dst_directory: A string representing the destination directory to save the image file.</span>
<span class="sd">            type_camera: An optional string representing the type of camera used to capture the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string representing the timestamp in the format &quot;mmdd_HHMMSS&quot; used in the saved image file name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">dst_directory</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dst_directory</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst_directory</span><span class="p">))</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;parent_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Media_path&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;is_video&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;state_view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;pos_frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">saved_image_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">type_camera</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">write_camera_type</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">type_camera</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ss</span></div>


<div class="viewcode-block" id="ModelApps.add_position_video_on_saved_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.add_position_video_on_saved_image">[docs]</a>
    <span class="k">def</span> <span class="nf">add_position_video_on_saved_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the current position of the video to the list of positions.</span>

<span class="sd">        If there is an active video, this method appends the current position of</span>
<span class="sd">        the video to the list of positions stored in the `__pos_video_image_saved`</span>
<span class="sd">        attribute. This list can be used later to create a map of where images were</span>
<span class="sd">        saved in the video.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__pos_video_image_saved</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.reopen_saved_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.reopen_saved_image">[docs]</a>
    <span class="k">def</span> <span class="nf">reopen_saved_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reopen saved image file</span>

<span class="sd">        Args:</span>
<span class="sd">            file_name:</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signal_image_original</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_result</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.set_position_frame_save_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.set_position_frame_save_image">[docs]</a>
    <span class="k">def</span> <span class="nf">set_position_frame_save_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">original</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function sets the position of a saved frame from the `Image_saved` list in the configuration view.</span>
<span class="sd">        If the timer is active, it will be stopped and the status will be emitted. If the parent path of the saved image</span>
<span class="sd">        is the same as the media source, the position of the frame will be set and the next frame signal</span>
<span class="sd">        will be emitted. If the parent path is different, the saved image will be reopened.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_name (str): The name of the saved file.</span>
<span class="sd">            original (bool, optional): Flag to indicate if the view is in original or not. Defaults to False.</span>


<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">file_name</span><span class="p">][</span><span class="s2">&quot;parent_path&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">file_name</span><span class="p">][</span><span class="s2">&quot;is_video&quot;</span><span class="p">]:</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">][</span><span class="n">file_name</span><span class="p">][</span><span class="s2">&quot;pos_frame&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">original</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">=</span> <span class="s2">&quot;FisheyeView&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reopen_saved_image</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.update_file_config">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.update_file_config">[docs]</a>
    <span class="k">def</span> <span class="nf">update_file_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function updates the configuration file located in the cached directory.</span>
<span class="sd">        It sets the `__config_file` attribute to the path of the configuration file</span>
<span class="sd">        and loads the configuration data into the `__configuration_view` attribute.</span>
<span class="sd">        The function also updates the `parameter_name` attribute with the value of &quot;Parameter_name&quot;</span>
<span class="sd">        in the configuration data and sets the `saved_image_list` attribute with a list of keys</span>
<span class="sd">        from the &quot;Image_saved&quot; dictionary in the configuration data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span> <span class="o">=</span> <span class="n">path_file</span> <span class="o">+</span> <span class="s2">&quot;/cached/cache_config.yaml&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parameter_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Parameter_name&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saved_image_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="ModelApps.set_media_source">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.set_media_source">[docs]</a>
    <span class="k">def</span> <span class="nf">set_media_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cam_type</span><span class="p">,</span> <span class="n">media_source</span><span class="p">,</span> <span class="n">parameter_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the media source for processing in this application.</span>

<span class="sd">        Args:</span>
<span class="sd">            cam_type: type of camera used</span>
<span class="sd">            media_source: the media source such as image, video or camera</span>
<span class="sd">            parameter_name: the parameter name</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Cam_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cam_type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Media_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">media_source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Parameter_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_name</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1"># self.configuration_view = self.__configuration_view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_moildev</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_image_original</span><span class="p">()</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">recenter_image_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recenter_image_state</span>

    <span class="nd">@recenter_image_state</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">recenter_image_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recenter_image_state</span> <span class="o">=</span> <span class="n">mode</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Original fisheye image of the application</span>

<span class="sd">        Returns:</span>
<span class="sd">            Image</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image</span>

    <span class="nd">@image</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter original fisheye image</span>

<span class="sd">        Args:</span>
<span class="sd">            _image: original image</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span> <span class="o">=</span> <span class="n">_image</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">change_panorama_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current panorama mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The current panorama mode as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pano_mode</span>

    <span class="nd">@change_panorama_mode</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">change_panorama_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the current panorama mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (str): The new panorama mode to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pano_mode</span> <span class="o">=</span> <span class="n">mode</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">change_anypoint_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current anypoint mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The current anypoint mode as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__anypoint_mode</span>

    <span class="nd">@change_anypoint_mode</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">change_anypoint_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the current anypoint mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (str): The new anypoint mode to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__anypoint_mode</span> <span class="o">=</span> <span class="n">mode</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">state_recent_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the state of the recent view.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the recent view is enabled, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span>

    <span class="nd">@state_recent_view</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">state_recent_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_view</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the state of the recent view.</span>

<span class="sd">        Args:</span>
<span class="sd">            state_view (bool): The new state of the recent view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">=</span> <span class="n">state_view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">state_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the state of the rubberband.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the rubberband is enabled, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_rubberband</span>

    <span class="nd">@state_rubberband</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">state_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state_rubberband</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        int: The state of the rubber band.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__state_rubberband</span> <span class="o">=</span> <span class="n">state_rubberband</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">set_draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the state of the rubber band.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__draw_polygon</span>

    <span class="nd">@set_draw_polygon</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">set_draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        bool: Whether to draw a polygon.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__draw_polygon</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">set_angle_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets whether to draw a polygon and creates the image result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span>

    <span class="nd">@set_angle_rotate</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">set_angle_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_rotate</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        int: The angle of rotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span> <span class="o">=</span> <span class="n">angle_rotate</span>

<div class="viewcode-block" id="ModelApps.set_width_image_on_label_result">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.set_width_image_on_label_result">[docs]</a>
    <span class="k">def</span> <span class="nf">set_width_image_on_label_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the angle of rotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__width_image_result</span> <span class="o">=</span> <span class="n">width</span></div>


    <span class="c1"># Mouse Events Area ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<div class="viewcode-block" id="ModelApps.label_original_mouse_double_click_anypoint_mode_1">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_double_click_anypoint_mode_1">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_double_click_anypoint_mode_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle double-click events on the original label image in Anypoint Mode 1.</span>

<span class="sd">        This function sets the Anypoint Mode 1 configuration values to their defaults and emits the `alpha_beta` signal with</span>
<span class="sd">        values `[0, 0]`. It then saves the new configuration to the configuration file and calls `create_maps_anypoint_mode_1()`</span>
<span class="sd">        to update the view.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The object itself, implicitly passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_maps_anypoint_mode_1</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_double_click_anypoint_mode_2">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_double_click_anypoint_mode_2">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_double_click_anypoint_mode_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets the configuration view for Anypoint Mode 2 and emits alpha and beta values of [0, 0].</span>

<span class="sd">        Resets the pitch, roll, yaw, and zoom values to their default values, sets the coordinates of the view to the</span>
<span class="sd">        current image center, and saves the updated configuration to a file. Additionally, emits alpha and beta values</span>
<span class="sd">        of [0, 0] to signal that the view has been reset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;roll&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_maps_anypoint_mode_2</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.label_recenter_mouse_move_event">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_recenter_mouse_move_event">[docs]</a>
    <span class="k">def</span> <span class="nf">label_recenter_mouse_move_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">calculate_ratio_image2label</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">buttons</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">NoButton</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;FisheyeView&quot;</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_center_image</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="n">label</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">QCursor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CursorShape</span><span class="o">.</span><span class="n">PointingHandCursor</span><span class="p">))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_move_event">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_move_event">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_move_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the display and configuration in response to mouse movement.</span>

<span class="sd">        Args:</span>
<span class="sd">            label: A PyQt5.QtWidgets.QLabel object representing the label being displayed.</span>
<span class="sd">            event: A PyQt5.QtGui.QMouseEvent object representing the mouse event.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">calculate_ratio_image2label</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">buttons</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">NoButton</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;FisheyeView&quot;</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="n">label</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">QCursor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CursorShape</span><span class="o">.</span><span class="n">PointingHandCursor</span><span class="p">))</span>
                <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">buttons</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MouseButton</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="n">label</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">QCursor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CursorShape</span><span class="o">.</span><span class="n">ClosedHandCursor</span><span class="p">))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">create_maps_anypoint_mode_1</span><span class="p">()</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">create_maps_anypoint_mode_2</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;PanoramaView&quot;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;under developing&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.label_recenter_mouse_leave_event">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_recenter_mouse_leave_event">[docs]</a>
    <span class="k">def</span> <span class="nf">label_recenter_mouse_leave_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;PanoramaView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_center_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()))</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_leave_event">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_leave_event">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_leave_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the mouse leave event on the original image label.</span>

<span class="sd">        This method is called when the mouse leaves the original image label in the</span>
<span class="sd">        UI. It performs different actions depending on the current view state:</span>
<span class="sd">        - If the state is &quot;AnypointView&quot;, it draws a crosshair on the original image</span>
<span class="sd">          and emits an alpha_beta signal with the calculated alpha and beta values</span>
<span class="sd">          based on the mode and configuration.</span>
<span class="sd">        - If the state is &quot;PanoramaView&quot;, it draws a crosshair on the original image</span>
<span class="sd">          and emits an alpha_beta signal with the calculated alpha and beta values</span>
<span class="sd">          based on the mode and configuration.</span>
<span class="sd">        - Otherwise, it simply draws a crosshair on the current image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;PanoramaView&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span></div>


<div class="viewcode-block" id="ModelApps.reset_coordinate_recenter_to_default">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.reset_coordinate_recenter_to_default">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_coordinate_recenter_to_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_press_event_anypoint_mode_1">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_press_event_anypoint_mode_1">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_press_event_anypoint_mode_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the configuration view for the first mode when a mouse press event occurs.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (QMouseEvent): The mouse press event.</span>
<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos_y</span>
            <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="ModelApps.label_original_recenter_mode">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_recenter_mode">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_recenter_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Can&#39;t process, the coordinate out of bound!!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_press_event_anypoint_mode_2">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_press_event_anypoint_mode_2">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_press_event_anypoint_mode_2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update configuration for Mode 2 when clicking on original image.</span>

<span class="sd">        Args:</span>
<span class="sd">            event: A QMouseEvent object representing the mouse press event.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
        <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>
        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.label_original_mouse_press_event_panorama_car">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_original_mouse_press_event_panorama_car">[docs]</a>
    <span class="k">def</span> <span class="nf">label_original_mouse_press_event_panorama_car</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the configuration of the car panorama mode with the mouse press event.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (QMouseEvent): The mouse press event.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
        <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>

        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.label_result_mouse_press_event">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.label_result_mouse_press_event">[docs]</a>
    <span class="k">def</span> <span class="nf">label_result_mouse_press_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mouse press event handler for the label displaying the image result.</span>

<span class="sd">        Does nothing if `self.image` is `None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="ModelApps.mouse_press_event_handler_recenter">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.mouse_press_event_handler_recenter">[docs]</a>
    <span class="k">def</span> <span class="nf">mouse_press_event_handler_recenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_x</span><span class="p">)</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ratio_y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Can&#39;t process, the coordinate out of bound!!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.create_recenter_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_recenter_image">[docs]</a>
    <span class="k">def</span> <span class="nf">create_recenter_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">icx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">icy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev_recenter</span><span class="o">.</span><span class="n">get_alpha_beta</span><span class="p">(</span><span class="n">icx</span><span class="p">,</span> <span class="n">icy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev_recenter</span><span class="o">.</span><span class="n">recenter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="mi">110</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">size_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the current size of the rubber band selection area.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The size of the rubber band selection area.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__size_rubberband</span>

    <span class="nd">@size_rubberband</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">size_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size_rubberband</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the size of the rubberband.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The size of the rubberband.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__size_rubberband</span> <span class="o">=</span> <span class="n">size_rubberband</span>

    <span class="c1"># @property</span>
    <span class="c1"># def configuration_view(self):</span>
    <span class="c1">#     return self.__configuration_view</span>
    <span class="c1">#</span>
    <span class="c1"># @configuration_view.setter</span>
    <span class="c1"># def configuration_view(self, config):</span>
    <span class="c1">#     self.__configuration_view = config</span>

<div class="viewcode-block" id="ModelApps.crop_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.crop_image">[docs]</a>
    <span class="k">def</span> <span class="nf">crop_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_ori</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Crop the image according to the selected rubberband area.</span>

<span class="sd">        Args:</span>
<span class="sd">            image_ori (np.ndarray): Original image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_cv2_to_q_image</span><span class="p">(</span><span class="n">image_ori</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">calculate_height</span><span class="p">(</span><span class="n">image_ori</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__width_image_result</span><span class="p">)</span>
        <span class="n">ratio_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">__width_image_result</span>
        <span class="n">ratio_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">/</span> <span class="n">height</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_rubberband</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">ratio_x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_rubberband</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">*</span> <span class="n">ratio_y</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_rubberband</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="n">ratio_x</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_rubberband</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="n">ratio_y</span><span class="p">)</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">QRect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">croppedImage</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
        <span class="n">point_1</span> <span class="o">=</span> <span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="n">point_2</span> <span class="o">=</span> <span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">))</span>
        <span class="n">ori_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;FisheyeView&quot;</span> <span class="k">else</span> <span class="n">image_ori</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_rectangle</span><span class="p">(</span><span class="n">ori_image</span><span class="p">,</span> <span class="n">point_1</span><span class="p">,</span> <span class="n">point_2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signal_image_original</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_result</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_q_image_to_mat</span><span class="p">(</span><span class="n">croppedImage</span><span class="p">))</span></div>


<div class="viewcode-block" id="ModelApps.draw_rectangle">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_rectangle">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">draw_rectangle</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">point_1</span><span class="p">,</span> <span class="n">point_2</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw rectangle on the image.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (): input image</span>
<span class="sd">            point_1 (): the first point</span>
<span class="sd">            point_2 (): the second point to create rectangle</span>
<span class="sd">            thickness (): the thickness of rectangle line</span>

<span class="sd">        Returns:</span>
<span class="sd">            image with rectangle object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">point_1</span><span class="p">,</span> <span class="n">point_2</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">225</span><span class="p">),</span> <span class="n">thickness</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span></div>


<div class="viewcode-block" id="ModelApps.convert_cv2_to_q_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.convert_cv2_to_q_image">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">convert_cv2_to_q_image</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Convert an image from OpenCV format to Qt format.</span>
<span class="sd">        The function takes an image in OpenCV format and returns the equivalent image in Qt format.</span>
<span class="sd">        The image can be grayscale, RGB or RGBA. The conversion is done by creating a `QImage` object and setting</span>
<span class="sd">        the image data and format accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (ndarray): The image in OpenCV format (height x width x channels)</span>

<span class="sd">        Returns:</span>
<span class="sd">            QImage: The image in Qt format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qim</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">qim</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">qim</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">QImage</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">Format_Indexed8</span><span class="p">)</span>
                <span class="n">qim</span><span class="o">.</span><span class="n">setColorTable</span><span class="p">([</span><span class="n">qRgb</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="n">qim</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">QImage</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">qim</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">image</span><span class="o">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">QImage</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">Format_ARGB32</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qim</span></div>


<div class="viewcode-block" id="ModelApps.convert_q_image_to_mat">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.convert_q_image_to_mat">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">convert_q_image_to_mat</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">q_image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts a QImage to a NumPy array.</span>

<span class="sd">        Args:</span>
<span class="sd">            q_image: A QImage instance to be converted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A NumPy array with the image data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If `q_image` is not a QImage instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">incomingImage</span> <span class="o">=</span> <span class="n">q_image</span><span class="o">.</span><span class="n">convertToFormat</span><span class="p">(</span><span class="n">QImage</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">Format_ARGB32</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">incomingImage</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">incomingImage</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="n">ptr</span> <span class="o">=</span> <span class="n">incomingImage</span><span class="o">.</span><span class="n">constBits</span><span class="p">()</span>

        <span class="c1"># https://blog.csdn.net/weixin_42670810/article/details/120683036</span>
        <span class="n">ptr</span><span class="o">.</span><span class="n">setsize</span><span class="p">(</span><span class="n">incomingImage</span><span class="o">.</span><span class="n">bytesPerLine</span><span class="p">()</span> <span class="o">*</span> <span class="n">incomingImage</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ptr</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># Copies the data</span>
        <span class="k">return</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.set_alpha_beta">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.set_alpha_beta">[docs]</a>
    <span class="k">def</span> <span class="nf">set_alpha_beta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the values of alpha and beta and update the configuration file.</span>

<span class="sd">        Args:</span>
<span class="sd">            alpha (float): the alpha value to set.</span>
<span class="sd">            beta (float): the beta value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">beta</span>

            <span class="k">if</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">alpha</span> <span class="o">&gt;</span> <span class="mi">110</span><span class="p">,</span> <span class="n">beta</span> <span class="o">&gt;</span> <span class="mi">110</span><span class="p">]):</span>
                    <span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">-</span> <span class="mi">110</span>
                    <span class="n">beta</span> <span class="o">=</span> <span class="n">beta</span> <span class="o">-</span> <span class="mi">110</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span> <span class="o">+</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="o">-</span><span class="mi">90</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span> <span class="o">+</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">beta</span>
            <span class="k">if</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="o">-</span><span class="mi">75</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span> <span class="o">+</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">alpha</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="o">-</span><span class="mi">75</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">beta</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

            <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">beta</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span> <span class="o">+</span> <span class="nb">round</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">get_rho_from_alpha</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.create_image_original">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_image_original">[docs]</a>
    <span class="k">def</span> <span class="nf">create_image_original</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       This function creates the original image based on the configuration view.</span>
<span class="sd">       The function will check the type of media source specified in the configuration view,</span>
<span class="sd">       and proceed accordingly. The function can handle different types of media sources including a camera stream,</span>
<span class="sd">       a video file, or an image file. The function sets the video and image variables based on the media source.</span>
<span class="sd">       If the media source is a camera stream, the function will start a timer to capture frames.</span>
<span class="sd">       If the media source is a video file, the function will capture frames for the duration of the video.</span>
<span class="sd">       If the media source is an image file, the function will read the image into memory.</span>

<span class="sd">       Returns:</span>
<span class="sd">           None</span>
<span class="sd">       &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Media_path&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Media_path&quot;</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">moil_camera</span><span class="p">(</span>
                            <span class="n">cam_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Cam_type&quot;</span><span class="p">],</span>
                            <span class="n">cam_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">,</span>
                            <span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="mi">2592</span><span class="p">,</span> <span class="mi">1944</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">video</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">recent_media_source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;streaming&quot;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;streaming camera usb camera&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.mjpg&#39;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">video</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">recent_media_source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;streaming&quot;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;streaming camera raspberry pi&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;.mp4&#39;</span><span class="p">,</span> <span class="s1">&#39;.MOV&#39;</span><span class="p">,</span> <span class="s1">&#39;.avi&#39;</span><span class="p">)):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">video</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">recent_media_source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Cam_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;video source&quot;</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;video source&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;.jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;.JPG&#39;</span><span class="p">,</span> <span class="s1">&#39;.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;.png&#39;</span><span class="p">,</span> <span class="s1">&#39;TIFF&#39;</span><span class="p">)):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;image source&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">video</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__media_source</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Cam_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image source&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">recent_media_source</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some error&quot;</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">config_view_info</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">)</span>

                <span class="k">except</span><span class="p">:</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Cant load the history, have error in media source</span><span class="se">\n</span><span class="s2">&quot;</span>
                                                         <span class="s2">&quot;Please check that your camera is on plug or </span><span class="se">\n</span><span class="s2">&quot;</span>
                                                         <span class="s2">&quot;the file is exist!. you can select new media source.&quot;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some error in media_source&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.create_image_result">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_image_result">[docs]</a>
    <span class="k">def</span> <span class="nf">create_image_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the result image based on the current view and configuration settings.</span>

<span class="sd">        If the `load_saved_image` flag is True, the function crops the original image based on the state of the</span>
<span class="sd">        `state_rubberband` flag. If it is False, the function checks the state of the `state_recent_view` flag and</span>
<span class="sd">        performs the following actions:</span>
<span class="sd">        - If the state is &quot;AnypointView&quot;, it rotates the image by the `__angle_rotate` angle, and remaps the image</span>
<span class="sd">          based on the `__map_x_anypoint` and `__map_y_anypoint` maps. If `set_draw_polygon` is True, it draws a</span>
<span class="sd">          polygon on the original image using the same maps. It then sets `image_result` to the resulting image</span>
<span class="sd">          and sets `__image_original` to the original image with the crosshair drawn on it.</span>
<span class="sd">        - If the state is &quot;PanoramaView&quot;, it rotates the image by the `__angle_rotate` angle, and remaps the image</span>
<span class="sd">          based on the `__map_x_pano` and `__map_y_pano` maps. If `change_panorama_mode` is &quot;car&quot;, it crops the</span>
<span class="sd">          resulting image using the `__crop_panorama_car` method. Otherwise, it crops it using the `__crop_panorama_tube`</span>
<span class="sd">          method. If `set_draw_polygon` is True, it draws a polygon on the original image using the same maps. It then</span>
<span class="sd">          sets `image_result` to the resulting image and sets `__image_original` to the original image with the crosshair</span>
<span class="sd">          drawn on it.</span>
<span class="sd">        - If the state is not &quot;AnypointView&quot; or &quot;PanoramaView&quot;, it rotates the image by the `__angle_rotate` angle and</span>
<span class="sd">          sets `image_result` to the resulting image. It then sets `__image_original` to the original image with the</span>
<span class="sd">          crosshair drawn on it.</span>

<span class="sd">        After creating the result image, the function emits a signal with the resulting image, and sets the `image_height`</span>
<span class="sd">        and `image_width` properties of the class.</span>

<span class="sd">        If the `state_rubberband` flag is True, the function calls the `crop_image` method on the resulting image, which</span>
<span class="sd">        will emit a signal with the cropped image.</span>

<span class="sd">        If the `load_saved_image` flag is False and the `state_rubberband` flag is False, the function emits a signal with</span>
<span class="sd">        the resulting image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crop_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">remap_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span><span class="p">)</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_draw_polygon</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_recenter_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="p">)</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">==</span> <span class="s2">&quot;PanoramaView&quot;</span><span class="p">:</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">remap_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span><span class="p">)</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                    <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crop_panorama_car</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crop_panorama_tube</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_draw_polygon</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span><span class="p">,</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_recenter_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_center_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rec_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">=</span> <span class="n">image_result</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crop_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image_result</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">remap_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span><span class="p">)</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_draw_polygon</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">==</span> <span class="s2">&quot;PanoramaView&quot;</span><span class="p">:</span>
                <span class="c1"># image_result = self.__model.rotate_image(self.image, self.__angle_rotate)</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">remap_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span><span class="p">)</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                    <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crop_panorama_car</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crop_panorama_tube</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_draw_polygon</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span><span class="p">,</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__image_original</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">image_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__angle_rotate</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">=</span> <span class="n">image_result</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_rubberband</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crop_image</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image_result</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">image_result</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.create_maps_fov">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_maps_fov">[docs]</a>
    <span class="k">def</span> <span class="nf">create_maps_fov</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">):</span>
        <span class="n">moildev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">connect_to_moildev</span><span class="p">(</span><span class="n">parameter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maps_x_fov</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maps_y_fov</span> <span class="o">=</span> <span class="n">moildev</span><span class="o">.</span><span class="n">maps_panorama_tube</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.draw_fov_original_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_fov_original_image">[docs]</a>
    <span class="k">def</span> <span class="nf">draw_fov_original_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_polygon_fov</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maps_x_fov</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maps_y_fov</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.draw_polygon_fov">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_polygon_fov">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">draw_polygon_fov</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">mapX</span><span class="p">,</span> <span class="n">mapY</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return image with a drawn polygon on it from mapX and mapY generated by maps anypoint or panorama.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: Original image</span>
<span class="sd">            mapX: map image X from anypoint process</span>
<span class="sd">            mapY: map image Y from anypoint process</span>

<span class="sd">        return:</span>
<span class="sd">            image: map x, map y</span>

<span class="sd">        - Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            image = draw_polygon(image,mapX,mapY)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hi</span><span class="p">,</span> <span class="n">wi</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">X1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Y1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">X2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Y2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">X3</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Y3</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">X4</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Y4</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">wi</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">mapX</span><span class="p">[</span><span class="mi">0</span><span class="p">,]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">mapY</span><span class="p">[</span><span class="mi">0</span><span class="p">,]</span>
            <span class="n">ee</span> <span class="o">=</span> <span class="n">mapX</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,]</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">mapY</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,]</span>

            <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">X1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
                <span class="n">Y1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">ee</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Y3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
                <span class="n">X3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
            <span class="n">x</span> <span class="o">+=</span> <span class="mi">10</span>

        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">mapX</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">mapY</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">mapX</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">mapY</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># eliminate the value 0 for map X</span>
            <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">c</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>  <span class="c1"># or d[y] and c[y] == 0.0:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Y2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
                <span class="n">X2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

            <span class="c1"># eliminate the value 0 for map Y</span>
            <span class="k">if</span> <span class="n">h</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">g</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Y4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
                <span class="n">X4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

            <span class="c1"># render every 10 times, it will be like 1, 11, 21 and so on.</span>
            <span class="n">y</span> <span class="o">+=</span> <span class="mi">10</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">X3</span><span class="p">,</span> <span class="n">Y3</span><span class="p">])</span>
        <span class="n">points3</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="c1"># Draw polyline on original image</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">polylines</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">([</span><span class="n">points3</span><span class="p">]),</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span></div>


<div class="viewcode-block" id="ModelApps.re_run_after_load_saved_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.re_run_after_load_saved_image">[docs]</a>
    <span class="k">def</span> <span class="nf">re_run_after_load_saved_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs necessary actions after loading a saved image, including updating the configuration file, resetting</span>
<span class="sd">        certain attributes, and creating the original and result images.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_file_config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_recent_view</span> <span class="o">=</span> <span class="s2">&quot;FisheyeView&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Media_path&quot;</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_original</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span></div>


<div class="viewcode-block" id="ModelApps.draw_crosshair_on_center_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_crosshair_on_center_image">[docs]</a>
    <span class="k">def</span> <span class="nf">draw_crosshair_on_center_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a crosshair in the center of the currently stored image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">crosshair</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">image</span></div>


<div class="viewcode-block" id="ModelApps.draw_crosshair_on_the_recenter_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_crosshair_on_the_recenter_image">[docs]</a>
    <span class="k">def</span> <span class="nf">draw_crosshair_on_the_recenter_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;FisheyeView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">crosshair</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">image</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.draw_crosshair_on_the_original_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.draw_crosshair_on_the_original_image">[docs]</a>
    <span class="k">def</span> <span class="nf">draw_crosshair_on_the_original_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a crosshair on the specified `image` at a location determined by the current state of the object.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: The image on which to draw the crosshair.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;FisheyeView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__state_view</span> <span class="o">==</span> <span class="s2">&quot;AnypointView&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_anypoint_mode</span> <span class="o">==</span> <span class="s2">&quot;mode_1&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recenter_image_state</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_panorama_mode</span> <span class="o">==</span> <span class="s2">&quot;car&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>

        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">crosshair</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signal_image_original</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">image</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parameter_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of the `__parameter_name` attribute.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The value of the `__parameter_name` attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__parameter_name</span>

    <span class="nd">@parameter_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">parameter_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of the `__parameter_name` attribute to the specified `parameter`.</span>

<span class="sd">        Args:</span>
<span class="sd">            parameter: The new value for the `__parameter_name` attribute.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__parameter_name</span> <span class="o">=</span> <span class="n">parameter</span>

    <span class="c1"># Moildev Area +++++++++++++++++++++++++++</span>
<div class="viewcode-block" id="ModelApps.create_moildev">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_moildev">[docs]</a>
    <span class="k">def</span> <span class="nf">create_moildev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a connection to Moildev based on the configuration view.</span>

<span class="sd">        If the `__configuration_view` attribute is not `None`, the function checks if the `Parameter_name` value is not</span>
<span class="sd">        `None`. If this is the case, the function sets the `parameter_name` attribute to the value of</span>
<span class="sd">        `self.__configuration_view[&quot;Parameter_name&quot;]`, and creates a connection to Moildev using the</span>
<span class="sd">        `self.__model.connect_to_moildev()` method and the `parameter_name` attribute. The function also sets the</span>
<span class="sd">        `pos_x` and `pos_y` attributes to the values of `self.__moildev.icx` and `self.__moildev.icy`, respectively.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Parameter_name&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameter_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Parameter_name&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">connect_to_moildev</span><span class="p">(</span><span class="n">parameter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__moildev_recenter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">connect_to_moildev</span><span class="p">(</span><span class="n">parameter_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_name</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span></div>


<div class="viewcode-block" id="ModelApps.recenter_image_process">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.recenter_image_process">[docs]</a>
    <span class="k">def</span> <span class="nf">recenter_image_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value_coordinate</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.change_coordinate_by_spinbox">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.change_coordinate_by_spinbox">[docs]</a>
    <span class="k">def</span> <span class="nf">change_coordinate_by_spinbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">icx</span><span class="p">,</span> <span class="n">icy</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">icx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Recenter_coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">icy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_recenter_image</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div>


    <span class="c1"># Anypoint area ++++++++++++++++++++++++++</span>
<div class="viewcode-block" id="ModelApps.create_maps_anypoint_mode_1">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_maps_anypoint_mode_1">[docs]</a>
    <span class="k">def</span> <span class="nf">create_maps_anypoint_mode_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates maps for anypoint mode 1 based on the configuration file.</span>

<span class="sd">        If the configuration file exists, the function loads the alpha, beta, and zoom values for mode 1 from the</span>
<span class="sd">        configuration file. It then uses the loaded values to create the maps for anypoint mode 1 using the</span>
<span class="sd">        `moildev.maps_anypoint_mode1()` method. If the `moildev` attribute is not `None`, the function also creates an</span>
<span class="sd">        image result using the `create_image_result()` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span>
            <span class="n">zoom</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_1&quot;</span><span class="p">][</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">maps_anypoint_mode1</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.create_maps_anypoint_mode_2">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_maps_anypoint_mode_2">[docs]</a>
    <span class="k">def</span> <span class="nf">create_maps_anypoint_mode_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates maps for anypoint mode 2 based on the configuration file.</span>

<span class="sd">        If the configuration file exists, the function loads the pitch, yaw, roll, and zoom values for mode 2 from the</span>
<span class="sd">        configuration file. It then uses the loaded values to create the maps for anypoint mode 2 using the</span>
<span class="sd">        `moildev.maps_anypoint_mode2()` method. If the `moildev` attribute is not `None`, the function also creates an</span>
<span class="sd">        image result using the `create_image_result()` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
            <span class="n">pitch</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;pitch&quot;</span><span class="p">]</span>
            <span class="n">yaw</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;yaw&quot;</span><span class="p">]</span>
            <span class="n">roll</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;roll&quot;</span><span class="p">]</span>
            <span class="n">zoom</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Mode_2&quot;</span><span class="p">][</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">maps_anypoint_mode2</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">yaw</span><span class="p">,</span> <span class="n">roll</span><span class="p">,</span>
                                                                                                  <span class="n">zoom</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span></div>


    <span class="c1"># panorama area ++++++++++++++++++++++++++</span>
<div class="viewcode-block" id="ModelApps.reset_panorama_car">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.reset_panorama_car">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_panorama_car</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;coord&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">icy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_beta</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_maps_panorama_car</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.create_maps_panorama_car">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_maps_panorama_car">[docs]</a>
    <span class="k">def</span> <span class="nf">create_maps_panorama_car</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the map images for the panorama car feature.</span>

<span class="sd">        This method creates the map images for the panorama car feature using the MOIL SDK. If the configuration file exists,</span>
<span class="sd">        it retrieves the alpha and beta values for the car from the configuration file using the private method __load_config().</span>
<span class="sd">        If the MOIL device object is not None, this method creates the map images for the panorama car feature using the alpha</span>
<span class="sd">        and beta values and sets the image result.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The Panorama object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># alpha_max = self.__moildev.camera_fov / 2</span>
                <span class="n">alpha_max</span> <span class="o">=</span> <span class="mi">180</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_pano</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_pano</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">maps_panorama_car</span><span class="p">(</span><span class="n">alpha_max</span><span class="p">,</span>
                                                                                        <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.create_maps_panorama_tube">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.create_maps_panorama_tube">[docs]</a>
    <span class="k">def</span> <span class="nf">create_maps_panorama_tube</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the map images for the panorama tube feature.</span>

<span class="sd">        This method creates the map images for the panorama tube feature using the MOIL SDK. If the configuration file exists,</span>
<span class="sd">        it retrieves the minimum and maximum alpha values for the tube from the configuration file using the private method</span>
<span class="sd">        __load_config(). If the MOIL device object is not None, this method creates the map images for the panorama tube</span>
<span class="sd">        feature using the alpha values and sets the image result.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The Panorama object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
            <span class="n">alpha_min</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_tube&quot;</span><span class="p">][</span><span class="s2">&quot;alpha_min&quot;</span><span class="p">]</span>
            <span class="n">alpha_max</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_tube&quot;</span><span class="p">][</span><span class="s2">&quot;alpha_max&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__map_x_anypoint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map_y_anypoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moildev</span><span class="o">.</span><span class="n">maps_panorama_tube</span><span class="p">(</span><span class="n">alpha_min</span><span class="p">,</span> <span class="n">alpha_max</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">__crop_panorama_car</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Crop the input image for the panorama car feature.</span>

<span class="sd">        This method crops the input image for the panorama car feature using the cropping parameters defined in the configuration</span>
<span class="sd">        file loaded through the private method __load_config(). It resizes the image to twice its original width, then crops the</span>
<span class="sd">        image using the crop_left, crop_right, crop_top, and crop_bottom parameters. The resulting image is then returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The Panorama object.</span>
<span class="sd">            image: The input image to be cropped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The cropped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
        <span class="n">crop_left</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;crop_left&quot;</span><span class="p">]</span>
        <span class="n">crop_right</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;crop_right&quot;</span><span class="p">]</span>
        <span class="n">crop_top</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;crop_top&quot;</span><span class="p">]</span>
        <span class="n">crop_bottom</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_car&quot;</span><span class="p">][</span><span class="s2">&quot;crop_bottom&quot;</span><span class="p">]</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">cropping_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">crop_left</span><span class="p">,</span> <span class="n">crop_right</span><span class="p">,</span> <span class="n">crop_top</span><span class="p">,</span> <span class="n">crop_bottom</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">__load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the configuration file for the Panorama object.</span>

<span class="sd">        This method loads the configuration file for the Panorama object using the private attribute __config_file.</span>
<span class="sd">        The configuration file is read using the PyYAML library and the resulting dictionary is returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The Panorama object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing the configuration settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">configuration_view</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">configuration_view</span>

    <span class="k">def</span> <span class="nf">__crop_panorama_tube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Crop the top and bottom of the input image based on configuration values.</span>

<span class="sd">        This method crops the top and bottom of the input image based on configuration values for the panorama tube</span>
<span class="sd">        feature. The crop values are retrieved from the configuration file using the private method __load_config().</span>
<span class="sd">        The cropped image is then returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The Panorama object.</span>
<span class="sd">            image: The input image to crop.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The cropped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__load_config</span><span class="p">()</span>
        <span class="n">crop_top</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_tube&quot;</span><span class="p">][</span><span class="s2">&quot;crop_top&quot;</span><span class="p">]</span>
        <span class="n">crop_bottom</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;Pano_tube&quot;</span><span class="p">][</span><span class="s2">&quot;crop_bottom&quot;</span><span class="p">]</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">cropping_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crop_top</span><span class="p">,</span> <span class="n">crop_bottom</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="c1"># video controller +++++++++++++++++++++++</span>
<div class="viewcode-block" id="ModelApps.next_frame_signal">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.next_frame_signal">[docs]</a>
    <span class="k">def</span> <span class="nf">next_frame_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the next frame from the video or camera and update the display.</span>

<span class="sd">        If the video capture object is not None and the video is currently playing, this method will:</span>

<span class="sd">        1. Read the next frame from the video.</span>
<span class="sd">        2. Update the position of the video player slider.</span>
<span class="sd">        3. Calculate the duration of the video in minutes and seconds.</span>
<span class="sd">        4. Calculate the current position of the video player in minutes and seconds.</span>
<span class="sd">        5. Emit a signal with the total duration of the video and the current position of the video player.</span>

<span class="sd">        If the video capture object is None or the video is not playing, this method will:</span>

<span class="sd">        1. Read the next frame from the camera.</span>
<span class="sd">        2. Update the display.</span>
<span class="sd">        3. Emit a signal with zeros for the duration and current position of the video player.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The VideoPlayer object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="n">success</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_FRAME_COUNT</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_slider_video_time_position</span><span class="p">()</span>
                    <span class="n">duration_sec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span>
                    <span class="n">total_minutes</span> <span class="o">=</span> <span class="n">duration_sec</span> <span class="o">//</span> <span class="mi">60</span>
                    <span class="n">duration_sec</span> <span class="o">%=</span> <span class="mi">60</span>
                    <span class="n">total_seconds</span> <span class="o">=</span> <span class="n">duration_sec</span>
                    <span class="n">sec_pos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span>
                    <span class="n">recent_minute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sec_pos</span> <span class="o">//</span> <span class="mi">60</span><span class="p">)</span>
                    <span class="n">sec_pos</span> <span class="o">%=</span> <span class="mi">60</span>
                    <span class="n">recent_sec</span> <span class="o">=</span> <span class="n">sec_pos</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">timer_video_info</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">total_minutes</span><span class="p">,</span> <span class="n">total_seconds</span><span class="p">,</span> <span class="n">recent_minute</span><span class="p">,</span> <span class="n">recent_sec</span><span class="p">])</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__raspi</span><span class="p">:</span>
                    <span class="n">success</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_image_result</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timer_video_info</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">i_camera</span> <span class="o">+=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="ModelApps.play_pause_video">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.play_pause_video">[docs]</a>
    <span class="k">def</span> <span class="nf">play_pause_video</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle between playing and pausing the video.</span>

<span class="sd">        If the video player timer is currently active, this method will pause the video. If the timer is not active,</span>
<span class="sd">        the method will resume playing the video. Additionally, if the video player was previously displaying a saved</span>
<span class="sd">        image, the method will reset the player to resume playing the video.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The VideoPlayer object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_saved_image</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span></div>


<div class="viewcode-block" id="ModelApps.stop_video">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.stop_video">[docs]</a>
    <span class="k">def</span> <span class="nf">stop_video</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop playing the video.</span>

<span class="sd">        If the video capture object is not None and the video is currently playing, this method will:</span>

<span class="sd">        1. Reset the video to the first frame.</span>
<span class="sd">        2. Stop the video player timer.</span>
<span class="sd">        3. Emit a signal to display the next frame.</span>
<span class="sd">        4. Emit a signal to update the timer status.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The VideoPlayer object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timer_status</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">())</span></div>


<div class="viewcode-block" id="ModelApps.rewind_video_5_second">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.rewind_video_5_second">[docs]</a>
    <span class="k">def</span> <span class="nf">rewind_video_5_second</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rewinds a video by 5 seconds from the current position.</span>

<span class="sd">        If a video is loaded, this function calculates the position of the video 5 seconds before the current position,</span>
<span class="sd">        and updates the video to that position. If the calculated position is before the beginning of the video, the</span>
<span class="sd">        function sets the video to the first frame. If no video is loaded, the function does nothing.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The instance of the class that this method belongs to.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span> <span class="o">-</span> <span class="mi">5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.forward_video_5_second">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.forward_video_5_second">[docs]</a>
    <span class="k">def</span> <span class="nf">forward_video_5_second</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the position of a video based on the value of a slider widget.</span>

<span class="sd">        If a video is loaded, this function calculates the frame number corresponding to the value of a slider widget</span>
<span class="sd">        as a percentage of the total duration, and updates the video to that frame. If no video is loaded, the function</span>
<span class="sd">        does nothing.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The instance of the class that this method belongs to.</span>
<span class="sd">            value: The current value of the slider widget as an integer between 0 and 100.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span>
                <span class="k">if</span> <span class="n">position</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.slider_controller">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.slider_controller">[docs]</a>
    <span class="k">def</span> <span class="nf">slider_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="n">dst_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span> <span class="o">*</span> <span class="n">value</span> <span class="o">/</span> <span class="mi">100</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">,</span> <span class="n">dst_frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">next_frame_signal</span><span class="p">()</span></div>


<div class="viewcode-block" id="ModelApps.set_slider_video_time_position">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.set_slider_video_time_position">[docs]</a>
    <span class="k">def</span> <span class="nf">set_slider_video_time_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the value of a slider widget based on the current position of a video.</span>

<span class="sd">        If a video is loaded, this function calculates the current time position as a percentage of the total duration</span>
<span class="sd">        and emits a signal with the corresponding value to update a slider widget. If no video is loaded, the function</span>
<span class="sd">        does nothing.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The instance of the class that this method belongs to.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">video</span><span class="p">:</span>
                <span class="n">dst_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_frame</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_frame</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">slider_time_value</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">dst_value</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.clear_saved_image">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.clear_saved_image">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_saved_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the saved image data from the configuration view and save the updated configuration to a file.</span>

<span class="sd">        This method removes all saved image data from the configuration view and updates the configuration file with the</span>
<span class="sd">        modified view.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: The object instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IOError: An error occurred while writing the updated configuration to the file.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">[</span><span class="s2">&quot;Image_saved&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


    <span class="c1"># Reset config to the default value ++++++</span>
<div class="viewcode-block" id="ModelApps.reset_config">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.reset_config">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets the configuration view to its default values.</span>

<span class="sd">        This function sets all the fields of the configuration view to their default values,</span>
<span class="sd">        and saves the new configuration to the config file.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Media_path&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;Cam_type&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;Parameter_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;Recenter_coord&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
            <span class="s2">&quot;Mode_1&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;coord&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
                <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;beta&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;zoom&quot;</span><span class="p">:</span> <span class="mi">4</span>
            <span class="p">},</span>
            <span class="s2">&quot;Mode_2&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;coord&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
                <span class="s2">&quot;pitch&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;yaw&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;roll&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;zoom&quot;</span><span class="p">:</span> <span class="mi">4</span>
            <span class="p">},</span>
            <span class="s2">&quot;Pano_tube&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;alpha_min&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                <span class="s2">&quot;alpha_max&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
                <span class="s2">&quot;crop_top&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;crop_bottom&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="s2">&quot;Pano_car&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;coord&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
                <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;beta&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;crop_left&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;crop_right&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;crop_top&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;crop_bottom&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="s2">&quot;Image_saved&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__configuration_view</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.github_information">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.github_information">[docs]</a>
    <span class="k">def</span> <span class="nf">github_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetches information about the GitHub repository.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple: A tuple containing the `git.Repo` object for the repository and a dictionary with the following keys:</span>
<span class="sd">                - &#39;origin_url&#39;: The URL of the repository&#39;s origin.</span>
<span class="sd">                - &#39;user_name&#39;: The username of the repository&#39;s owner.</span>
<span class="sd">                - &#39;active_branch&#39;: The name of the currently active branch.</span>
<span class="sd">                - &#39;list_branch&#39;: A list of the repository&#39;s branch names.</span>
<span class="sd">                - &#39;token&#39;: The personal access token (PAT) used to authenticate with the repository, or `None` if no PAT is specified.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)</span>
        <span class="n">__cached_file</span> <span class="o">=</span> <span class="n">path_file</span> <span class="o">+</span> <span class="s2">&quot;/src/models/cached/github_config.yaml&quot;</span>
        <span class="n">path_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span> <span class="o">+</span> <span class="s2">&quot;/../..&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="n">path_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">__cached_file</span><span class="p">):</span>
            <span class="n">list_branch</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">heads</span><span class="p">:</span>
                <span class="n">list_branch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">))</span>
            <span class="n">user_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;.com/(.*)/moilapp&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
            <span class="n">token</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">user_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">user_name</span> <span class="o">=</span> <span class="n">user_name</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">user_name</span><span class="si">}</span><span class="s1">:(.*)@github.com/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">token</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="n">github_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;origin_url&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                             <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">user_name</span><span class="p">,</span>
                             <span class="s2">&quot;active_branch&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">active_branch</span><span class="p">),</span>
                             <span class="s2">&quot;list_branch&quot;</span><span class="p">:</span> <span class="n">list_branch</span><span class="p">,</span>
                             <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">token</span><span class="p">}</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">__cached_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">github_config</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">__cached_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">configuration_github</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">git_repository_info</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">configuration_github</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="p">,</span> <span class="n">configuration_github</span></div>


<div class="viewcode-block" id="ModelApps.refresh_github_information">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.refresh_github_information">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh_github_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Refreshes the GitHub repository information and emits the updated configuration.</span>

<span class="sd">        Reads the cached GitHub configuration from the file system and updates it with the latest</span>
<span class="sd">        information from the remote repository. The list of branches is obtained from the repository,</span>
<span class="sd">        and the `list_branch` property in the cached configuration is updated. If a token is present</span>
<span class="sd">        in the configuration, the remote repository is fetched using the token. Finally, the updated</span>
<span class="sd">        configuration is emitted using the `git_repository_info` signal.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)</span>
        <span class="n">__cached_file</span> <span class="o">=</span> <span class="n">path_file</span> <span class="o">+</span> <span class="s2">&quot;/src/models/cached/github_config.yaml&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">__cached_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">configuration_github</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

        <span class="n">list_branch</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span><span class="o">.</span><span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;origin/HEAD&quot;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">list_branch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">configuration_github</span><span class="p">[</span><span class="s2">&quot;list_branch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_branch</span>
        <span class="k">if</span> <span class="n">configuration_github</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">git_repository_info</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">configuration_github</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">__cached_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">configuration_github</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ModelApps.change_config_github">
<a class="viewcode-back" href="../../models.html#models.model_apps.ModelApps.change_config_github">[docs]</a>
    <span class="k">def</span> <span class="nf">change_config_github</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">branch</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the configuration for the GitHub repository.</span>

<span class="sd">        Args:</span>
<span class="sd">            token (str, optional): The access token to use when connecting to the</span>
<span class="sd">                GitHub repository. If provided, the function will update the</span>
<span class="sd">                configuration file with the new token. Defaults to None.</span>
<span class="sd">            branch (str, optional): The name of the active branch to use. If</span>
<span class="sd">                provided, the function will update the configuration file with</span>
<span class="sd">                the new branch name. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>

<span class="sd">        The function loads the current configuration for the GitHub repository</span>
<span class="sd">        from a YAML file, updates it with the provided token and/or branch name,</span>
<span class="sd">        and writes it back to the file. If a token is provided and the current</span>
<span class="sd">        repository URL does not include the token, the function updates the</span>
<span class="sd">        repository URL with the new token. Finally, the function emits a signal</span>
<span class="sd">        with the updated configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cached_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;src/models/cached/github_config.yaml&quot;</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cached_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
            <span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>

        <span class="k">if</span> <span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">check_token</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">check_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">remote_url</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">configuration</span><span class="p">[</span><span class="s1">&#39;user_name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">@&quot;</span><span class="p">,</span>
                                    <span class="n">configuration</span><span class="p">[</span><span class="s1">&#39;origin_url&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">remote_url</span><span class="p">)</span>
                <span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;origin_url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_github</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">url</span>

        <span class="k">if</span> <span class="n">branch</span><span class="p">:</span>
            <span class="n">configuration</span><span class="p">[</span><span class="s2">&quot;active_branch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">branch</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cached_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">git_repository_info</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Perseverance Technology, Taiwan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>